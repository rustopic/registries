# Gather Manager Configuration Schema
# Defines the structure for plugin configuration with UI-friendly organization

# Schema version
version: "1.0.0"
pluginId: gather-manager

# Root schema definition
schema:
  type: object
  title: "Gather Manager Configuration"
  description: "Configure resource gathering rates and multipliers"
  
  properties:
    # Settings section - Core plugin behavior
    Settings:
      type: object
      title: "Settings"
      description: "Core plugin settings and behavior"
      order: 1
      
      properties:
        Enabled:
          type: boolean
          title: "Enable Plugin"
          description: "Enable or disable the Gather Manager plugin"
          default: true
          order: 1
          
        Debug:
          type: boolean
          title: "Debug Mode"
          description: "Enable debug logging for troubleshooting"
          default: false
          order: 2
          
        UsePermissionMultipliers:
          type: boolean
          title: "Use Permission Multipliers"
          description: "Allow different multipliers based on player permissions"
          default: true
          order: 3
          
        SaveOnChange:
          type: boolean
          title: "Save on Change"
          description: "Automatically save configuration when modified"
          default: true
          order: 4
    
    # Options section - General gathering options
    Options:
      type: object
      title: "Options"
      description: "General gathering configuration options"
      order: 2
      
      properties:
        DefaultMultiplier:
          type: number
          title: "Default Multiplier"
          description: "Default gathering multiplier for all resources (1.0 = normal)"
          minimum: 0.0
          maximum: 100.0
          default: 1.0
          step: 0.1
          order: 1
          
        MinimumMultiplier:
          type: number
          title: "Minimum Multiplier"
          description: "Minimum allowed gathering multiplier"
          minimum: 0.0
          maximum: 10.0
          default: 0.1
          step: 0.1
          order: 2
          
        MaximumMultiplier:
          type: number
          title: "Maximum Multiplier"
          description: "Maximum allowed gathering multiplier"
          minimum: 1.0
          maximum: 100.0
          default: 10.0
          step: 0.1
          order: 3
          
        EnableToolMultipliers:
          type: boolean
          title: "Enable Tool Multipliers"
          description: "Apply different multipliers based on tool type"
          default: true
          order: 4
          
        EnableResourceMultipliers:
          type: boolean
          title: "Enable Resource Multipliers"
          description: "Apply different multipliers per resource type"
          default: true
          order: 5
    
    # Resource multipliers - Map-based configuration
    ResourceMultipliers:
      type: object
      title: "Resource Multipliers"
      description: "Gathering multipliers for specific resources"
      order: 3
      
      # This is a map/dictionary structure
      # Keys are resource names, values are multiplier numbers
      additionalProperties:
        type: number
        title: "Multiplier"
        description: "Gathering multiplier for this resource"
        minimum: 0.0
        maximum: 100.0
        default: 1.0
        step: 0.1
      
      # Default values for common resources
      default:
        Wood: 1.0
        Stone: 1.0
        MetalOre: 1.0
        SulfurOre: 1.0
        Cloth: 1.0
        Leather: 1.0
        AnimalFat: 1.0
        CrudeOil: 1.0
        LowGradeFuel: 1.0
        HighQualityMetalOre: 1.0
        
      # UI hint: this should render as a key-value map editor
      ui:
        type: "map"
        keyLabel: "Resource Name"
        valueLabel: "Multiplier"
        addButtonText: "Add Resource"
    
    # Tool multipliers - Map-based configuration
    ToolMultipliers:
      type: object
      title: "Tool Multipliers"
      description: "Gathering multipliers for specific tools"
      order: 4
      
      additionalProperties:
        type: number
        title: "Multiplier"
        description: "Gathering multiplier for this tool"
        minimum: 0.0
        maximum: 100.0
        default: 1.0
        step: 0.1
      
      default:
        Rock: 1.0
        Hatchet: 1.2
        Pickaxe: 1.2
        SalvageHammer: 1.5
        Chainsaw: 2.0
        Jackhammer: 2.5
        
      ui:
        type: "map"
        keyLabel: "Tool Name"
        valueLabel: "Multiplier"
        addButtonText: "Add Tool"
    
    # Permission multipliers - Map-based configuration
    PermissionMultipliers:
      type: object
      title: "Permission Multipliers"
      description: "Gathering multipliers for player permission groups"
      order: 5
      
      additionalProperties:
        type: number
        title: "Multiplier"
        description: "Gathering multiplier for players with this permission"
        minimum: 0.0
        maximum: 100.0
        default: 1.0
        step: 0.1
      
      default:
        gathermanager.vip: 1.5
        gathermanager.premium: 2.0
        gathermanager.admin: 3.0
        
      ui:
        type: "map"
        keyLabel: "Permission Name"
        valueLabel: "Multiplier"
        addButtonText: "Add Permission"
    
    # Messages section - In-game messages
    Messages:
      type: object
      title: "Messages"
      description: "Customize in-game messages and notifications"
      order: 6
      
      properties:
        GatheringMessage:
          type: string
          title: "Gathering Message"
          description: "Message shown when gathering resources (use {resource} and {amount} as placeholders)"
          default: "Gathered {amount} {resource}"
          maxLength: 200
          order: 1
          
        MultiplierChanged:
          type: string
          title: "Multiplier Changed Message"
          description: "Message shown when multiplier is changed"
          default: "Gathering multiplier changed to {multiplier}x"
          maxLength: 200
          order: 2
          
        NoPermission:
          type: string
          title: "No Permission Message"
          description: "Message shown when player lacks permission"
          default: "You don't have permission to use this command"
          maxLength: 200
          order: 3
          
        ConfigReloaded:
          type: string
          title: "Config Reloaded Message"
          description: "Message shown when configuration is reloaded"
          default: "Gather Manager configuration reloaded"
          maxLength: 200
          order: 4

# UI generation hints
ui:
  # Render order for sections
  sectionOrder:
    - Settings
    - Options
    - ResourceMultipliers
    - ToolMultipliers
    - PermissionMultipliers
    - Messages
  
  # Form layout
  layout:
    type: "tabs"
    sections:
      - id: "settings"
        title: "Settings & Options"
        fields:
          - Settings
          - Options
      - id: "multipliers"
        title: "Multipliers"
        fields:
          - ResourceMultipliers
          - ToolMultipliers
          - PermissionMultipliers
      - id: "messages"
        title: "Messages"
        fields:
          - Messages

# Validation rules
validation:
  # Ensure multipliers are within acceptable ranges
  rules:
    - field: "Options.DefaultMultiplier"
      condition: ">= Options.MinimumMultiplier && <= Options.MaximumMultiplier"
      message: "Default multiplier must be between minimum and maximum"
    
    - field: "ResourceMultipliers.*"
      condition: ">= Options.MinimumMultiplier && <= Options.MaximumMultiplier"
      message: "Resource multipliers must be between minimum and maximum"
    
    - field: "ToolMultipliers.*"
      condition: ">= Options.MinimumMultiplier && <= Options.MaximumMultiplier"
      message: "Tool multipliers must be between minimum and maximum"
    
    - field: "PermissionMultipliers.*"
      condition: ">= Options.MinimumMultiplier && <= Options.MaximumMultiplier"
      message: "Permission multipliers must be between minimum and maximum"

